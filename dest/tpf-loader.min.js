!function(a,b){var c=function(){this._settings={width:"100%",height:"100%",server:"movu.ch",protocol:"https",holderId:"movu-embedded-widget-holder"},this._errors={NotFoundHolderId:new Error("\nCan't find holder element with id: "+this._settings.holderId+"\n* Use MovuWidget.settings.set('holderId','element name');\n* Or place html elemenent with id: "+this._settings.holderId),CustomerIdNotProvided:new Error("CustomerId Not Provided")},this._params={language:"en"},this._forms=[]},d=c.prototype;d.settings=function(){var a=this;return{set:function(b,c){a._settings[b]=c},get:function(b){return a._settings[b]}}},d.getApiUrl=function(){var a="?";for(var b in this._params)-1===["language","customerId"].indexOf(b)&&(a+=b+"="+this._params[b]+"&");return"&"===a.substr(-1)&&(a=a.substring(0,a.length-1)),this._settings.protocol+"://"+this._settings.server+"/"+this._params.language+"/tpf_widgets/"+this.getCustomerId()+("?"===a?"":a)},d.isIE=function(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("msie")?parseInt(a.split("msie")[1]):!1},d.createXhr=function(b){var c=this.isIE();if(8>=c&&(!b.match(/^(get|post|head|put|delete|options)$/i)||!a.XMLHttpRequest))return new a.ActiveXObject("Microsoft.XMLHTTP");if(a.XMLHttpRequest)return new a.XMLHttpRequest;throw minErr("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")},d.http=function(a,b){var c=this.isIE(),d=this.createXhr(a.method);if(d.onreadystatechange=function(){4===d.readyState&&(200===d.status?b(null,{status:d.status,statusText:10>c?"":d.statusText,response:"response"in d?d.response:d.responseText}):0!==d.status&&b("response"in d?d.response:d.responseText,{status:d.status,statusText:10>c?"":d.statusText,response:"response"in d?d.response:d.responseText}))},d.open(a.method,a.url),a.headers)for(var e in a.headers)d.setRequestHeader(e,a.headers[e]);return void 0!==a.data?d.send(JSON.stringify(a.data)):d.send(),d},d.form=function(a){var b=this;return void 0===this._forms[a]&&(this._forms[a]={}),{set:function(c,d){b._forms[a][c]=d}}},d.populateForm=function(a,c){if(c=c||"",void 0!==this._forms[a])for(var d in this._forms[a]){var e=b.getElementById(c+d);e.value=this._forms[a][d]}},d.params=function(){var a=this;return{set:function(b,c){a._params[b]=c},get:function(b){return a._params[b]}}},d.getCustomerId=function(){if(this.el){var a=this.el.getAttribute("data-customer-id");if(a)return a}return this._params.customerId},d.init=function(){this.el=b.getElementById(this._settings.holderId),this.iframe=iframe=b.createElement("iframe");var c=this,d=this.getCustomerId();if(void 0===d||null===d)throw this._errors.CustomerIdNotProvided;if(this.el=this.el||b.getElementById(this._settings.holderId),void 0===this.el||null===this.el)throw this._errors.NotFoundHolderId;this.el.style.width=this._settings.width,iframe.frameBorder="0",iframe.marginheight="0",iframe.width="100%",iframe.height="100%",iframe.scrolling="no",a.addEventListener("message",function(a){c.handleSizingResponse.call(c,a)},!1),iframe.onload=function(){iframe.contentWindow.postMessage("sizing?",c.settings().get("protocol")+"://"+c.settings().get("server"))},iframe.src=this.getApiUrl(),this.el.appendChild(iframe)},d.getRemoteUrl=function(){return this.settings().get("protocol")+"://"+this.settings().get("server")},d.handleSizingResponse=function(a){if(a.origin==this.getRemoteUrl()){var b=a.data.split(":")[0];"sizing"==b&&(console.log(a.data.split(":")[1]),this.el.style.height=a.data.split(":")[1])}},d.tryToAutoInit=function(){var a=b.getElementById(this._settings.holderId);if(a){var c=a.getAttribute("data-autoinit");c&&"true"===c.toLowerCase()&&(this.el=a,this.init())}},a.MovuWidget=new c}(window,document),document.addEventListener("DOMContentLoaded",function(){MovuWidget.tryToAutoInit()});